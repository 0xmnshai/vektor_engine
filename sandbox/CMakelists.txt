cmake_minimum_required(VERSION 3.17)
project(sandbox)

file(GLOB_RECURSE SANDBOX_SOURCES CONFIGURE_DEPENDS
    ${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp
)

file(GLOB_RECURSE SANDBOX_HEADERS CONFIGURE_DEPENDS
    ${CMAKE_CURRENT_SOURCE_DIR}/include/*.hpp
)

add_executable(sandbox
    ${SANDBOX_SOURCES}
    ${SANDBOX_HEADERS}
)

target_include_directories(sandbox
    PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}/include
    ${CMAKE_CURRENT_SOURCE_DIR}/src
)

set(CMAKE_BUILD_RPATH_USE_ORIGIN ON)

if(APPLE)
    set_target_properties(sandbox PROPERTIES
        BUILD_RPATH "@loader_path"
    )
elseif(UNIX)
    set_target_properties(sandbox PROPERTIES
        BUILD_RPATH "$ORIGIN"
    )
endif()

target_link_libraries(sandbox PRIVATE vektor)

target_sources(sandbox PRIVATE
    ${vektor_SOURCE_DIR}/include/entry_point.hpp
)
